## 修复：羊刀延迟使用及错误进入冷却的问题

羊刀的使用目前有两个问题。第一，普遍反应羊刀使用会慢一拍；第二，之前也提交过的，目标未被变羊但羊刀进入了冷却。

第一个问题，是因为目前 `function TriggerSheepStick(u)` 的逻辑中，给单位添加变羊技能和使用变羊技能使用的是 if-else 的逻辑关系。  
也就是说运行两次 `TriggerSheepStick` 后目标才会变羊，而两次运行间设置有 1 秒的固定延迟，就导致了玩家感觉羊刀触发慢，远不及红杖等道具。  
修复的思路就是单独进行一次是否添加了变羊技能的判断，之后继续执行使用技能的代码。

第二个问题，之前猜测的原因是因为移动的无敌状态导致了羊刀失效。但这次更新取消移动无敌状态后，仍然会触发这个 BUG。  
看了代码了，感觉是先 `ability:StartCooldown(15)` 了，再使用变羊技能。那么也许是因为目标在空中了无法被变羊，但道具却进入了冷却。  
修改逻辑是在使用技能之后，添加一个延迟判断对象是否被羊了,如果被羊道具才进入冷却。  
（羊刀变羊使用的是 `crab_voodoo`，在判断时不会和暗影萨满技能 `shadow_shaman_voodoo` 以及萨满羁绊的 `frog_voodoo` 混淆。）

另外，个人建议在 `crab_voodoo` 的 `AbilityBehavior` 里添加忽略技能前后摇的属性 `DOTA_ABILITY_BEHAVIOR_IMMEDIATE`，以更符合羊刀的稀有度。 目前的使用后摇确实有点长。

以上是简易的修复，更严谨的改法也许是重写参照 `function TriggerDagon(u)` 的代码重写 `function TriggerSheepStick(u)`，让羊刀不再依赖 `npc_abilities_custom` 里的技能，不过不知道是否能实现。